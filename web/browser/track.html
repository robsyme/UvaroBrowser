<!DOCTYPE html>

<script type="application/dart" src="track.dart"></script>
<polymer-element name="uvaro-track" attributes="sourcePath seqName seqStart seqStop cursorPositionPx">
  <template>
    <style>
    svg {
      width: 100%;
      height: 30px;
    }
    
    .gene {
      opacity: 0.75;
      stroke: black;
      fill: #F2F2FF;
    }
    </style>
    <p>{{sourcePath}}: {{seqStart}} - {{seqStop}}</p>
    <div id="testDiv">
    <svg id="svgCanvas">
        <line x1="{{cursorPositionPx + 0.5}}" x2="{{cursorPositionPx + 0.5}}" y1="0%" y2="100%" stroke-width="1" stroke="blue"></line>
      <template repeat="{{gene in geneList}}">
          <g>
          <template if="{{(gene.geneLength / bpPerPixel) >= 10}}">
            <path class="gene" id="{{gene.id}}" d="M {{(gene.geneStart - seqStart) / bpPerPixel}} 5.5 v 20 h {{gene.geneLength / bpPerPixel - 10}} l 10 -10 l -10 -10 Z"></path>
          </template>
          <template if="{{(gene.geneLength / bpPerPixel) < 10}}">
            <path class="gene" id="{{gene.id}}" d="M {{(gene.geneStart - seqStart) / bpPerPixel}} 5.5 v 20 h {{gene.geneLength / bpPerPixel}} v -20 Z"></path>
          </template>
          <path stroke="red" stroke-width="1" stroke-dasharray="1,2" d="M {{(gene.geneStart - seqStart) / bpPerPixel}} 15.5 h {{gene.geneLength / bpPerPixel}}"></path>
        </g>
      </template>
    </svg>
    </div>
  </template>
</polymer-element>
